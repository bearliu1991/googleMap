webpackJsonp([1],{"7zFv":function(e,t){},HLNL:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};n.d(o,"getCookie",function(){return L}),n.d(o,"setCookie",function(){return M}),n.d(o,"removeCookie",function(){return P}),n.d(o,"getAuthCookie",function(){return C});var r={};n.d(r,"toType",function(){return A}),n.d(r,"filterNull",function(){return B}),n.d(r,"serializeParam",function(){return R}),n.d(r,"httpGet",function(){return N}),n.d(r,"httpPost",function(){return j}),n.d(r,"httpPostJson",function(){return W});var a=n("7+uW"),i={name:"App",data:function(){return{isLoading:!0}},created:function(){window.onload=function(){this.isLoading=!1}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app",loading:this.isLoading}},[t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")(i,s,!1,function(e){n("btzR")},null,null).exports,c=n("/ocq"),u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[n("el-form-item",{attrs:{prop:"phone"}},[n("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}},[n("i",{staticClass:"icon-yonghu",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[n("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"}),e._v(" "),n("i",{staticClass:"icon-mima",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"login-submit",attrs:{type:"primary",size:"small"},on:{click:e.handleLogin}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")({name:"HelloWorld",data:function(){return{loginForm:{phone:"15397133767",password:"123456"},passwordType:"password",loginRules:{phone:[{required:!0,validator:this.noEmpty,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{showPassword:function(){""===this.passwordType?this.passwordType="password":this.passwordType=""},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){t&&e.httpPostJson(e._login,e.loginForm).then(function(t){t.success&&e.$router.push({path:"/home"})})})}}},u,!1,function(e){n("7zFv")},"data-v-4bce4a8d",null).exports,m=n("Xxa5"),d=n.n(m),g=n("exGp"),f=n.n(g),h=n("BO1k"),v=n.n(h),y=n("//Fk"),w=n.n(y),k=n("pFYg"),I=n.n(k),x=n("mtWM"),b=n.n(x),_=n("lbHh"),F=n.n(_);function L(e){return F.a.get(e)}function M(e,t,n){return F.a.set(e,t,{expires:n})}function P(e){return F.a.remove(e)}function C(){return F.a.get("x-auth-token")}var O=n("zL8q"),E=n.n(O),$=b.a.create({timeout:1e4});b.a.defaults.retry=4,b.a.defaults.retryDelay=20,$.interceptors.request.use(function(e){var t=L("x-auth-token");return t&&(e.headers["x-auth-token"]=t),e},function(e){return w.a.reject(e)}),$.interceptors.response.use(function(e){var t=e.headers,n=e.data;if(t["x-auth-token"]&&M("x-auth-token",t["x-auth-token"]),"-2"!==n.code)return n.success||Object(O.Message)({message:n.msg,type:"error",duration:3e3}),e;O.MessageBox.alert(n.msg,{callback:function(e){P("x-auth-token"),location.reload()}})},function(e){return O.Message.error("请求超时"),w.a.reject(e&&e.response)});var z,D,T=$;function A(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function B(e){for(var t in e)void 0!==e[t]&&null!==e[t]&&""!==e[t]||delete e[t],"string"===A(e[t])?e[t]=e[t].trim():"object"===A(e[t])?e[t]=B(e[t]):"array"===A(e[t])&&(e[t]=B(e[t]));return e}function R(e,t){var n=[],o=void 0;for(o in e)if(e.hasOwnProperty(o)){var r=t?t+"["+o+"]":o,a=e[o];n.push(null!==a&&"object"===(void 0===a?"undefined":I()(a))?R(a,r):r+"="+a)}return n.join("&")}function N(e,t){return new w.a(function(n,o){T.get(e,{params:t}).then(function(e){n(e.data)}).catch(function(e){e.response&&o(e)})})}function j(e,t){return new w.a(function(n,o){var r=B(t);T.post(e,r,{emulateJSON:!0}).then(function(e){n(e.data)}).catch(function(e){e.response&&o(e)})})}function W(e,t){return new w.a(function(n,o){var r=e+"?",a=R(B(t));T.post(r+a).then(function(e){n(e.data)}).catch(function(e){var t=e.response;t&&o(t)})})}var H={name:"",data:function(){return{showForm:!1,curItem:{name:"",address:"",area:"",linkman:"",phone:"",price:"",remark:"",coordinates:[]},type:"type",polygonObj:null}},mounted:function(){window.google?this.initMap():this.init()},methods:{init:function(){var e=this;window.onload=function(){e.initMap()}},saveData:function(){var e=this,t=this.curItem;t.coordinates=t={id:this.curItem.id,name:this.curItem.name,address:this.curItem.address,area:this.curItem.area,linkman:this.curItem.linkman,phone:this.curItem.phone,price:this.curItem.price,lat:this.curItem.lat,lng:this.curItem.lng,remark:this.curItem.remark,coordinates:this.calcLines(this.curItem.polygon)},this.httpPost(this._save,t).then(function(t){e.$message.success("保存成功"),D.close(),null!==e.curItem.id&&void 0!==e.curItem.id&&(e.curItem.marker.setMap(null),e.curItem.polygon.setMap(null)),e.getDatas()})},delData:function(){var e=this;this.httpPostJson(this._delData,{id:this.curItem.id}).then(function(t){t.success&&(e.curItem.marker.setMap(null),e.curItem.polygon.setMap(null),e.$message.success("删除成功"))})},switchType:function(e){z.setMapTypeId(e)},calcLines:function(e){var t=[];if(e)for(var n=e.getPath().getLength(),o=0;o<n;o++){var r=e.getPath().getAt(o).toUrlValue(6).split(",");t.push({lat:r[0],lng:r[1]})}return t},getAll:function(){var e=this;return new w.a(function(t,n){e.httpPost(e._byPage).then(function(e){t(e)})})},newPolygon:function(e){var t=new google.maps.Polygon({paths:e,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,editable:!0,fillColor:"#FF0000",fillOpacity:.35});return t.setMap(z),t},newMarker:function(e,t){return new google.maps.Marker({position:{lat:e,lng:t},map:z})},constructArr:function(e){var t=this,n=this,o=function(e){if(e.coordinates&&e.coordinates.length&&e.lat&&e.lng){e.coordinates.forEach(function(e){e.lat=e.lat-0,e.lng=e.lng-0});var o=t.newPolygon(e.coordinates),r=t.newMarker(e.lat,e.lng);r.polygon=o,r.addListener("click",function(t){n.showForm=!0,n.curItem=e,n.curItem.marker=r,n.curItem.polygon=o,D.open(z,r)})}},r=!0,a=!1,i=void 0;try{for(var s,l=v()(e);!(r=(s=l.next()).done);r=!0){o(s.value)}}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}},getDatas:function(){var e=this;return f()(d.a.mark(function t(){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAll();case 2:(n=t.sent).success&&n.data&&n.data.length&&e.constructArr(n.data);case 4:case"end":return t.stop()}},t,e)}))()},initMap:function(){var e=this;z=new google.maps.Map(document.getElementById("map"),{center:{lat:24.47,lng:118.33},zoom:12,mapTypeId:google.maps.MapTypeId.HYBRID}),google.maps.Polygon.prototype.getBoundingBox=function(){var e=new google.maps.LatLngBounds;return this.getPath().forEach(function(t,n){e.extend(t)}),e},google.maps.Polygon.prototype.getApproximateCenter=function(){var e,t,n,o,r=0,a=1,i=this.getBoundingBox(),s=0;if(e=i.getCenter(),google.maps.geometry.poly.containsLocation(e,this))return e;for(t=5,n=new google.maps.LatLng(i.getNorthEast().lat(),i.getSouthWest().lng()),r=google.maps.geometry.spherical.computeDistanceBetween(n,i.getSouthWest())/10,s=google.maps.geometry.spherical.computeDistanceBetween(n,i.getNorthEast())/10;a<=t&&(o=google.maps.geometry.spherical.computeOffset(e,r*a,0),!google.maps.geometry.poly.containsLocation(o,this))&&(o=google.maps.geometry.spherical.computeOffset(e,s*a,90),!google.maps.geometry.poly.containsLocation(o,this))&&(o=google.maps.geometry.spherical.computeOffset(e,r*a,180),!google.maps.geometry.poly.containsLocation(o,this))&&(o=google.maps.geometry.spherical.computeOffset(e,s*a,270),!google.maps.geometry.poly.containsLocation(o,this));a++);return o},D=new google.maps.InfoWindow({content:document.getElementById("infoForm")});var t=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!0,editable:!0,OverlayCompleteEvent:null,drawingControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER,drawingModes:["polygon"]},polygonOptions:{fillColor:"#000",fillOpacity:.1,strokeWeight:5,clickable:!1,editable:!0,zIndex:1}});t.setMap(z),google.maps.event.addListener(t,"polygoncomplete",function(n){var o=new google.maps.Marker({position:n.getApproximateCenter(),map:z});google.maps.event.addListener(o,"click",function(){e.showForm=!0,e.curItem={name:"",address:"",area:"",linkman:"",phone:"",price:"",remark:"",coordinates:[]},e.curItem.polygon=n,e.curItem.marker=o,e.curItem.lat=o.getPosition().lat(),e.curItem.lng=o.getPosition().lng(),D.open(z,o)}),t.setOptions({drawingMode:null})}),this.getDatas()}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}],attrs:{id:"infoForm"}},[n("el-form",{attrs:{model:e.curItem,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"名称: "}},[n("el-input",{model:{value:e.curItem.name,callback:function(t){e.$set(e.curItem,"name",t)},expression:"curItem.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系人: "}},[n("el-input",{model:{value:e.curItem.linkman,callback:function(t){e.$set(e.curItem,"linkman",t)},expression:"curItem.linkman"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系电话: "}},[n("el-input",{model:{value:e.curItem.phone,callback:function(t){e.$set(e.curItem,"phone",t)},expression:"curItem.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"土地面积: "}},[n("el-input",{model:{value:e.curItem.area,callback:function(t){e.$set(e.curItem,"area",t)},expression:"curItem.area"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"地块价格: "}},[n("el-input",{model:{value:e.curItem.price,callback:function(t){e.$set(e.curItem,"price",t)},expression:"curItem.price"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注: "}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.curItem.remark,callback:function(t){e.$set(e.curItem,"remark",t)},expression:"curItem.remark"}})],1)],1),e._v(" "),n("div",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveData}},[e._v("保存")]),e._v(" "),void 0!==e.curItem.id&&null!==e.curItem.id?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delData}},[e._v("删除")]):e._e()],1)],1)])},staticRenderFns:[]};var q=n("VU/8")(H,S,!1,function(e){n("HLNL")},null,null).exports;a.default.use(c.a);var J=new c.a({routes:[{path:"/login",name:"login",component:p},{path:"/home",name:"home",component:q},{path:"/",redirect:"/login"},{path:"*",redirect:"/login"}]}),U=(n("tvR6"),n("fZjL")),V=n.n(U),G="http://97.64.27.95",Y={_login:G+"/user/login.do",_save:G+"/land/save.do",_byPage:G+"/land/getAll.do",_delData:G+"/land/delete.do"},Z={install:function(e,t){var n=!0,a=!1,i=void 0;try{for(var s,l=v()(V()(r));!(n=(s=l.next()).done);n=!0){var c=s.value;e.prototype[c]=r[c]}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}for(var u in o)e.prototype[u]=o[u];for(var p in Y)e.prototype[p]=Y[p]}};a.default.config.productionTip=!1,a.default.use(E.a),a.default.use(Z),new a.default({el:"#app",router:J,components:{App:l},template:"<App/>"})},btzR:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2bf9a1d449bb9f628081.js.map